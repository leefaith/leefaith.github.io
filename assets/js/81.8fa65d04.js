(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{731:function(s,n,a){s.exports=a.p+"assets/img/next.65457201.png"},953:function(s,n,a){"use strict";a.r(n);var e=a(36),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"vue做服务端渲染"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue做服务端渲染"}},[s._v("#")]),s._v(" vue做服务端渲染")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://zh.nuxtjs.org/guide/installation/",target:"_blank",rel:"noopener noreferrer"}},[s._v("nuxt官网文档"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("nuxt.js    vue语法版本的  服务器渲染(ssr) 框架")]),s._v(" "),e("blockquote",[e("p",[s._v("服务端渲染解决什么问题")]),s._v(" "),e("p",[s._v("做服务端渲染首先必须是有对应的需求,即对 实时到达时间(页面访问时间)的绝对需求.  如果只是简单的一个管理系统, 区区几百毫秒的优化 显得十分小题大做.")]),s._v(" "),e("p",[s._v("服务端渲染这里 有一个成熟优秀的框架 nuxt.js , 正如next.js对于react,nuxt是vue服务端渲染的优秀解决方案")])]),s._v(" "),e("blockquote",[e("p",[s._v("nuxt的出现可以让渲染内容完全服务端化,解决seo不够友好, 首屏渲染速度不够迅速的问题,")]),s._v(" "),e("p",[s._v("但是这里需要注意: 并不是所有页面都需要服务端渲染, 因为服务端渲染比重多大 对于服务器的访问处理能力 要求也会急剧增大")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("步骤  这个 nuxt 脚手架 不需要 安装  nodejs 默认自带了\n  1 脚手架 npx create-nuxt-app <项目名>\n  2 进入项目 yarn dev 启动开发\n  \n  上线 \n  yarn build\n  yarn start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[e("strong",[s._v("nuxt.js项目  查看源代码 他是已经渲染好了很多html了")])]),s._v(" "),e("p",[s._v("1 这个和seo 搜索引擎 比如百度 他会去 找到所有网站 挨个看你的网站内容 有没有 好不好--爬虫")]),s._v(" "),e("p",[s._v("如果普通vue  项目 是 空的  那么 就没有内容  seo不行 网站就很垃圾")]),s._v(" "),e("p",[s._v("如果nuxt.js项目  有内容  就比较好 利于seo")]),s._v(" "),e("p",[s._v("2  普通vue项目  内容打包到js了  那个js会很大  首页就显示很慢")]),s._v(" "),e("p",[s._v("如果nuxt.js项目  只是一些 js 其他的他服务器端就渲染好了   稍微快")]),s._v(" "),e("p",[s._v("vue单页面应用渲染是从服务器获取所需js，在客户端将其解析生成html挂载于")]),s._v(" "),e("p",[s._v("id为app的DOM元素上，这样会存在两大问题。")]),s._v(" "),e("ol",[e("li",[s._v("由于资源请求量大，造成网站首屏加载缓慢，不利于用户体验。")]),s._v(" "),e("li",[s._v("由于页面内容通过js插入，对于内容性网站来说，搜索引擎无法抓取网站内容，不利于SEO。\nNuxt.js 是一个基于Vue.js的通用应用框架，预设了利用Vue.js开发服务端渲染的应用所需要的各种配置。可以将html在服务端渲染，合成完整的html文件再输出到浏览器。")])]),s._v(" "),e("p",[e("strong",[s._v("除此之外，nuxt与vue还有一些其他方面的区别。")])]),s._v(" "),e("ol",[e("li",[e("p",[e("strong",[s._v("路由")]),s._v("\nnuxt按照 pages 文件夹的目录结构自动生成路由")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://localhost:3000/user/reg",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:3000/user/reg"),e("OutboundLink")],1),s._v("  相当于 去访问  pages文件夹 下的  user文件夹 下的 reg.vue")]),s._v(" "),e("p",[s._v("vue需在 src/router/index.js 手动配置路由")])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("入口页面")]),s._v("\nnuxt页面入口为 layouts/default.vue\nvue页面入口为 src/App.vue")])]),s._v(" "),e("li",[e("p",[s._v("nuxt 类似  router-view   nuxt-link  类似 router-link")])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("webpack配置")]),s._v("\nnuxt内置webpack，允许根据服务端需求，在 nuxt.config.js 中的build属性自定义构建webpack的配置，覆盖默认配置\nvue关于webpack的配置存放在build文件夹下")])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("asyncData 里面发送ajax 这个东西跟生命周期这些都是平级的")])])])]),s._v(" "),e("p",[s._v("要理解asyncData方法执行时，其实是在服务端完成的，这个数据是在服务端渲染好了的")]),s._v(" "),e("p",[s._v("​")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("unxtjs的ajax，你先别往你那个异步上去思考，其实这里面所有的ajax最后都会形成页面。你别想着，我一点按钮，调用一个方法，然后再ajax去加载数据。因为我们最后全部都会生成静态，所以任何的获取数据的操作，最后都会变成页面的跳转。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("所以，官方给了一套写法，你必须按照这个去写，\n并且这里的ajax会再页面渲染之前就执行。这个东西跟生命周期这些都是平级的。")]),s._v(" "),e("p",[s._v("1 cnpm install @nuxtjs/axios --save\n2 .plugins目录新建axios.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import * as axios from 'axios'\n\nlet options ={}\n\n//需要全路径才能工作\n\nif(process.server){\n\n　　options.baseURL=http://${process.env.HOST || 'localhost'}:${process.env.PORT || 3000}/api\n\n}\n\nexport default axios.create(options)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("3.Nuxt.config.js增加axios配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("modules:[\n\n　　'@nuxtjs/axios'\n\n],\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("4 使用 asyncData 里面发送ajax 这个东西跟生命周期这些都是平级的 在页面渲染之前")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("export default {\n\n  async asyncData({app}){\n\n　　        let res =await app.$axios({\n\n              　　headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n              　　method: 'get',\n              　　url: `http://test.yms.cn/testjson.asp`,\n              　　data: ''\n    \n        　　})\n        // app.$axios\n        　　console.log('res',res.data)\n        　　return{\n        　      　testData:res.data.title\n        　　}\n    },\n    created(){\n      console.log('nuxt reg组件')\n      \n    }\n\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("p",[e("img",{attrs:{src:a(731),alt:"next"}})])])}),[],!1,null,null,null);n.default=t.exports}}]);