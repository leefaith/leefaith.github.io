(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{957:function(t,a,e){"use strict";e.r(a);var n=e(36),s=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"浏览器缓存原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存原理"}},[t._v("#")]),t._v(" 浏览器缓存原理")]),t._v(" "),e("p",[t._v("缓存： 浏览器可能会把你上一次的代码 存起来  你再次访问 就没有去拿新代码 而是 直接拿的缓存")]),t._v(" "),e("p",[t._v("强缓存不发请求到服务器 直接拿缓存")]),t._v(" "),e("p",[t._v("协商缓存会发请求到服务器 服务器告诉你， 去拿缓存 ，就拿， 不拿缓存就拿新的代码。")]),t._v(" "),e("h4",{attrs:{id:"浏览器缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存"}},[t._v("#")]),t._v(" 浏览器缓存")]),t._v(" "),e("p",[t._v("可以通过后台设置响应头控制")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v(" 浏览器是会有缓存的 \n    分别是强制缓存和协商缓存 都可以通过后台设置响应头控制\n     1 强缓存：不会向服务器发送请求，直接从缓存中读取资源 每次访问本地缓存直接验证看是否过期\n           强缓存可以通过设置两种 HTTP Header 实现：Expires过期时间 和 Cache-Control缓存控制。\n           Cache-Control:max-age=300  缓存300秒\n     2 协商缓存(Last-Modified / If-Modified-Since和Etag / If-None-Match)\n\t\t协商缓存命中，服务器会将这个请求返回，但是不会返回这个资源的数据 而是告诉客户端可以直接从缓存拿\n\t\t\n强制缓存优先于协商缓存进行，\n  若强制缓存(Expires和Cache-Control)生效则直接使用缓存，\n\n 若不生效则进行后台设置头 协商缓存(Last-Modified / If-Modified-Since和Etag / If-None-Match)，\n\n1、浏览器在加载资源时，先根据这个资源的一些  http header  判断它是否强缓存，强缓存如果命中，浏览器直接从自己的缓存中读取资源，不会发请求到服务器。比如某个css文件，如果浏览器在加载它所在的网页时，这个css文件的缓存配置命中了强缓存，浏览器就直接从缓存中加载这个css，连请求都不会发送到网页所在服务器。\n\n2、当强缓存过期的时候，浏览器一定会发送一个请求到服务器，通过服务器端依据资源的另外一些http header验证这个资源是否命中协商缓存，如果协商缓存命中，服务器会将这个请求返回，但是不会返回这个资源的数据，而是告诉客户端可以直接从缓存中加载这个资源，于是浏览器就又会从自己的缓存中去加载这个资源。 \n3 强缓存与协商缓存的共同点是：如果命中，都是从客户端缓存中加载资源，而不是从服务器加载资源数据；区别是：强缓存不发请求到服务器，协商缓存会发请求到服务器。\n4 当协商缓存也没有命中的时候，浏览器直接从服务器加载资源数据。\n\n 那么代表该请求的缓存失效，返回200，重新返回资源和缓存标识，\n\n  再存入浏览器缓存中；生效则返回304，继续使用缓存\n")])])]),e("h4",{attrs:{id:"服务器缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器缓存"}},[t._v("#")]),t._v(" 服务器缓存")]),t._v(" "),e("p",[t._v("​      服务器 可以 主动把 需要缓存的数据或者页面内容 存到 redis(类似数据库 比数据库快) 中\n​     后面可以从里面取  就不去数据库拿了")]),t._v(" "),e("h4",{attrs:{id:"html5-有个manifest-也可以缓存-但是不常用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html5-有个manifest-也可以缓存-但是不常用"}},[t._v("#")]),t._v(" html5 有个manifest 也可以缓存 但是不常用")]),t._v(" "),e("p",[e("strong",[t._v("注意")])]),t._v(" "),e("p",[t._v("协商缓存跟强缓存不一样，强缓存不发请求到服务器，所以有时候资源更新了浏览器还不知道，但是协商缓存会发请求到服务器，所以资源是否更新，服务器肯定知道。大部分web服务器都默认开启协商缓存")])])}),[],!1,null,null,null);a.default=s.exports}}]);